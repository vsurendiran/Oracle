with average_salary (deptno, avg_sal) as
(select deptno, round(avg(sal),-1) 
   from emp group by deptno)
select * from emp inner join average_salary
on average_salary.deptno = emp.deptno
where emp.sal > average_salary.avg_sal;



with 
 function empname(v_empno in number)
 return varchar2 is
 v_empname varchar2;
 begin
  select ename into v_empname 
    from emp where empno = v_empno;
  return v_empname;
  when no 
 end;
 select empno,empname(empno) name from emp;
